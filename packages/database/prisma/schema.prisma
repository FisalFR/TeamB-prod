// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider        = "prisma-client-js"
  output          = "../.prisma/client"
  engineType      = "binary"
  previewFeatures = ["fullTextSearch", "fullTextIndex"]
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
  // env("POSTGRES_URL")
  // "postgresql://teamb:teamb20@database.cs.wpi.edu:5432/teambdb?schema=teamb"
}

// example table used in the express router example
model HighScore {
  id    Int      @id @default(autoincrement())
  time  DateTime
  score Int
}

model nodes {
  nodeID    String  @id
  xcoord    Int
  ycoord    Int
  floor     String
  building  String
  nodeType  String
  longName  String
  shortName String
  startEdge edges[] @relation(name: "startNode")
  endEdge   edges[] @relation(name: "endNode")
}

model edges {
  edgeID      String @id
  startNodeID String
  endNodeID   String
  startNode   nodes  @relation(name: "startNode", fields: [startNodeID], references: [nodeID])
  endNode     nodes  @relation(name: "endNode", fields: [endNodeID], references: [nodeID])
}

model users {
  username  String     @id
  password  String
  firstName String
  lastName  String
  gender    String
  type      String
  patients  patient[]  @relation(name: "patientUsernameID")
  employees employee[] @relation(name: "employeeUsernameID")
}

model patient {
  patientUsername   String @id
  reasonToStay      String
  patientUsernameID users  @relation(name: "patientUsernameID", fields: [patientUsername], references: [username])
}

model employee {
  employeeUsername   String        @id
  salary             Int
  employeeUsernameID users         @relation(name: "employeeUsernameID", fields: [employeeUsername], references: [username])
  interpreters       interpreter[] @relation(name: "interpreterUsernameID")
}

model interpreter {
  interpreterUsername   String   @id
  language              String
  native                Boolean
  interpreterUsernameID employee @relation(name: "interpreterUsernameID", fields: [interpreterUsername], references: [employeeUsername])
}

model forms {
  formID              String                        @id
  status              String
  type                String
  assignee            String
  dateCreated         DateTime                      @default(now())
  location            String
  languageRequests    languageInterpreterRequests[] @relation(name: "languageRequestID")
  maintenanceRequests maintenances[]                @relation(name: "maintenanceRequestID")
  medicineRequests    medicineRequests[]            @relation(name: "medicineRequestID")
  sanitationRequests  sanitationRequests[]          @relation(name: "sanitationRequestID")
  securityRequests    securityRequests[]            @relation(name: "securityRequestID")
}

model languageInterpreterRequests {
  languageRequest   String @id
  language          String
  languageRequestID forms  @relation(name: "languageRequestID", fields: [languageRequest], references: [formID])
}

model maintenances {
  maintenanceRequest   String @id
  issue                String
  isUrgent             String
  feedback             String
  maintenanceRequestID forms  @relation(name: "maintenanceRequestID", fields: [maintenanceRequest], references: [formID])
}

model medicineRequests {
  medicineRequest    String @id
  employeeName       String
  priority           String
  medicine           String
  quantity           Int
  additionalComments String
  medicineRequestID  forms  @relation(name: "medicineRequestID", fields: [medicineRequest], references: [formID])
}

model sanitationRequests {
  sanitationRequest  String @id
  employeeName       String
  priority           String
  serviceType        String
  contaminant        String
  additionalComments String
  sanitationRquestID forms  @relation(name: "sanitationRequestID", fields: [sanitationRequest], references: [formID])
}

model securityRequests {
  securityRequest   String @id
  employeeName      String
  request           String
  additionalInfo     String
  location          String
  quantity          Int
  priority          String
  securityRequestID forms  @relation(name: "securityRequestID", fields: [securityRequest], references: [formID])
}
